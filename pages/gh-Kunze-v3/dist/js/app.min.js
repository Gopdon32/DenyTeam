const APP_CONFIG={PRIMARY_PHONE:'+380 73 299 9777',SECONDARY_PHONE:'+380 75 685 3150',STORES:[{address:'–ì–ª–∏–±–æ—á–∏—Ü—å–∫–∞ 16, –ö–∏—ó–≤',name:'–û—Ñ—ñ—Å 1'},{address:'–°—Ç–æ–ª–∏—á–Ω–µ —à–æ—Å–µ 104, –ö–∏—ó–≤',name:'–û—Ñ—ñ—Å 2'}],SOCIAL:{telegram:'https://t.me/kunzeauto',whatsapp:'https://wa.me/380732999777',tiktok:'https://tiktok.com/@kunzeauto'}};let currentGalleryIndex=0,currentGallery=[],currentCar=null,currentLang=localStorage.getItem('lang')||'ua';currentLang=('string'==typeof currentLang?currentLang.trim().toLowerCase():'ua');if(!currentLang||!window.LANG||!window.LANG[currentLang]){currentLang='ua'}localStorage.setItem('lang',currentLang);function setLanguage(e){if(!window.LANG||!window.LANG[e])return;currentLang=e,localStorage.setItem('lang',e),handleRoute(),setTimeout((()=>{document.querySelectorAll('.lang-flag').forEach(e=>{e.classList.remove('active')}),document.querySelector(`.lang-flag[onclick="setLanguage('${e}')"]`)?.classList.add('active')}),50)}function hidePreloader(){const e=document.getElementById('preloader');e&&e.classList.add('hidden')}function handleRoute(){const e=window.location.hash||'',t=e.match(/#\/model\/([a-z0-9\-]+)/);if(t&&t[1]){const e=window.cars&&window.cars.find(e=>e.slug===t[1]);if(e)return void renderModelPage(e)}renderHomePage()}function renderHomePage(){const e=window.LANG&&window.LANG[currentLang];if(!e)return;const t=document.getElementById('app');t.innerHTML=`${renderNavbar()}<div class="page"><section class="hero"><div class="container"><div class="hero-content"><h1>${e.heroTitle}</h1><p>${e.heroSubtitle}</p></div></div></section><section class="guarantee-section"><div class="container"><div class="guarantee-card"><div class="guarantee-icon">‚ö°</div><div class="guarantee-content"><h3>${e.guaranteeTitle}</h3><p>${e.guaranteeText}</p></div></div></div></section><section class="catalog-container" id="catalog-container"><div class="container"><div class="catalog-title"><h2>${e.catalogTitle}</h2><p>${e.catalogSubtitle}</p></div><div class="catalog-grid">${window.cars.map(renderCatalogCard).join('')}</div></div></section></div>${renderFooter()}`,initMobileMenu()}function renderCatalogCard(e){const t=window.LANG&&window.LANG[currentLang];if(!t)return'';const a=t.descriptionMap&&t.descriptionMap[e.descriptionShort]?t.descriptionMap[e.descriptionShort]:e.descriptionShort;return`<div class="catalog-card"><a href="#/model/${e.slug}" class="card-image-wrapper" aria-label="${e.brand} ${e.model}"><img src="${e.heroImage}" alt="${getAlt(e,e.heroImage)}" class="card-image" loading="lazy" decoding="async" width="400" height="300" /><span class="card-badge">NEW</span><div class="card-flag"><img src="images/logo.png" alt="–£–∫—Ä–∞—ó–Ω–∞" title="–£–∫—Ä–∞—ó–Ω–∞" /></div></a><div class="card-content"><div class="card-header"><div class="card-title"><div class="card-brand">${e.brand}</div><div class="card-model">${e.model}</div><div class="card-year">${e.year}</div></div></div><div class="card-price">${t.priceFrom} ${formatPrice(e.trims[0].price)} $</div><p class="card-description">${a}</p><div class="card-footer"><a href="#/model/${e.slug}" class="btn btn-primary btn-small">${t.details}</a><button class="btn btn-secondary btn-small" onclick="contactUs('${e.model}')" type="button">${t.order}</button></div></div></div>`}function renderModelPage(e){const t=document.getElementById('app');t.innerHTML=`${renderNavbar()}<div class="page model-page">${renderModelHero(e)}${renderTrimsSection(e)}${renderPdfSection(e)}${renderVideoReviewSection(e)}${renderGallerySection(e)}${renderContactsSection()}</div>${renderFooter()}`,window.scrollTo(0,0),currentGalleryIndex=0,currentCar=e,currentGallery=e.gallery||[],initMobileMenu(),setupGalleryInteraction()}function renderModelHero(e){const t=window.LANG&&window.LANG[currentLang];if(!t)return'';const a=e.trims[0];return`<section class="model-hero"><div class="container"><div class="model-hero-content"><div class="model-hero-image"><img src="${e.heroImage}" alt="${getAlt(e,e.heroImage)}" class="model-hero-img" loading="eager" decoding="async" width="1600" height="900" /></div><div class="model-hero-info"><h1>${e.brand} ${e.model} ${e.year}</h1><div class="card-price">${t.priceFrom} ${formatPrice(e.trims[0].price)} $</div><p class="model-hero-desc">${t.descriptionMap&&t.descriptionMap[e.descriptionShort]?t.descriptionMap[e.descriptionShort]:e.descriptionShort}</p><div class="model-hero-features"><div class="feature-item"><div class="feature-icon"></div><span><strong>${a.powerHp}</strong> ${t.power}</span></div><div class="feature-item"><div class="feature-icon"></div><span><strong>${a.batteryKwh}</strong> ${t.battery}</span></div><div class="feature-item"><div class="feature-icon"></div><span><strong>${a.rangeKm}</strong> ${t.range}</span></div><div class="feature-item"><div class="feature-icon"></div><span>${t.drive} <strong>${t.driveMap&&t.driveMap[a.drive]?t.driveMap[a.drive]:a.drive}</strong></span></div></div><div class="model-hero-cta"><button class="btn btn-primary" onclick="contactUs('${e.model}')">${t.testDrive}</button><button class="btn btn-outline" onclick="scrollToContacts()">${t.contactUs}</button></div></div></div></div></section>`}function scrollToContacts(){const e=document.getElementById('contacts');e&&e.scrollIntoView({behavior:'smooth'})}function renderTrimsSection(e){const t=window.LANG&&window.LANG[currentLang];if(!t)return'';return`<section class="trims-section"><div class="container"><div class="trims-title"><h2>${t.trimsTitle}</h2><p>${t.trimsSubtitle}</p></div><div class="trims-list">${e.trims.map((a,i)=>`<div class="trim-card"><div class="trim-name">${a.name}</div><div class="trim-price">${formatPrice(a.price)} $</div><div class="trim-specs"><div class="trim-spec"><span class="trim-spec-label">${t.power}</span><span class="trim-spec-value">${a.powerHp} ${t.power}</span></div><div class="trim-spec"><span class="trim-spec-label">${t.battery}</span><span class="trim-spec-value">${a.batteryKwh} ${t.battery}</span></div><div class="trim-spec"><span class="trim-spec-label">${t.range}</span><span class="trim-spec-value">${a.rangeKm} ${t.range}</span></div><div class="trim-spec"><span class="trim-spec-label">${t.drive}</span><span class="trim-spec-value">${t.driveMap&&t.driveMap[a.drive]?t.driveMap[a.drive]:a.drive}</span></div><div class="trim-spec"><span class="trim-spec-label">${t.colors}</span><span class="trim-spec-value">${a.colors.map(e=>t.colorsMap&&t.colorsMap[e]?t.colorsMap[e]:e).join(', ')}</span></div></div><button class="btn btn-secondary" style="width:100%; margin-top: 15px;" onclick="contactUs('${e.model} ${a.name}')">${t.order}</button></div>`).join('')}</div></div></section>`}function renderVideoReviewSection(e){const t=window.LANG&&window.LANG[currentLang];if(!t||!e.video)return'';const a=getPoster(e);return`<section class="video-review"><div class="container"><div class="video-review-title"><h2>${t.videoTitle}</h2><p>${t.videoSubtitle} ${e.brand} ${e.model}</p></div><div class="video-wrapper"><video controls preload="none" loading="lazy" poster="${a}" width="1600" height="900" ><source src="${e.video}" type="video/mp4">${t.videoNotSupported}</video></div></div></section>`}function getPoster(e){return e.gallery?.[0]||e.heroImage||''}function renderPdfSection(e){const t=window.LANG&&window.LANG[currentLang];if(!t)return'';const a=window.getPdfLinks?window.getPdfLinks(e.slug):[];return a&&0!==a.length?`<section class="pdf-section"><div class="container"><div class="pdf-title"><h2>${t.pdfTitle}</h2><p>${t.pdfSubtitle}</p></div><div class="pdf-list">${a.map(e=>`<a href="${e}" target="_blank" class="pdf-link"><span class="pdf-icon">üìÑ</span><span class="pdf-name">${e.split('/').pop().replace(/.pdf$/,'').replace(/-/g,' ').trim()}</span></a>`).join('')}</div></div></section>`:''}function renderGallerySection(e){const t=window.LANG&&window.LANG[currentLang];if(!t)return'';return e.gallery&&0!==e.gallery.length?`<section class="gallery-section"><div class="container"><div class="gallery-title"><h2>${t.galleryTitle}</h2><p>${t.gallerySubtitle} ${e.brand} ${e.model}</p></div><div class="gallery-grid">${e.gallery.map((a,i)=>`<div class="gallery-item" onclick="openGallery(${i})"><img src="${a}" alt="${getAlt(e,a)}" loading="lazy" decoding="async" fetchpriority="low" width="400" height="300" /></div>`).join('')}</div></div></section>`:''}function renderContactsSection(){const e=window.LANG&&window.LANG[currentLang];if(!e)return'';return`<section class="contacts-section" id="contacts"><div class="container"><div class="contacts-title"><h2>${e.contactsTitle}</h2><p>${e.contactsSubtitle}</p></div><div class="contacts-grid">${APP_CONFIG.STORES.map((t,a)=>`<div class="contact-card" ${0===a?'id="footer-contact"':''}><strong>${e.office} ${a+1}</strong><br><span aria-hidden="true">üìç</span> ${t.address}<br><a href="tel:${APP_CONFIG.PRIMARY_PHONE.replace(/\s+/g,'')}" class="contact-phone">${APP_CONFIG.PRIMARY_PHONE}</a></div>`).join('')}</div></div></section>`}function renderNavbar(){const e=window.LANG&&window.LANG[currentLang];if(!e)return'';return`<nav class="navbar"><div class="container"><div class="navbar-content"><div class="navbar-brand" onclick="navigateTo('')"><span class="navbar-brand-text">KUNZE</span></div><button class="navbar-toggle" id="navbarToggle" aria-label="Toggle menu" aria-expanded="false"><span></span><span></span><span></span></button><div class="navbar-menu" id="navMenu"><a href="#/">${e.navCatalog}</a><a href="#/contacts">${e.navContacts}</a></div><div class="navbar-contacts"><span class="navbar-contact-phone">${APP_CONFIG.PRIMARY_PHONE}</span></div><div class="navbar-socials">${[{url:'images/telegram.svg',label:'Telegram',href:APP_CONFIG.SOCIAL.telegram},{url:'images/whatsapp.svg',label:'WhatsApp',href:APP_CONFIG.SOCIAL.whatsapp},{url:'images/tiktok.svg',label:'TikTok',href:APP_CONFIG.SOCIAL.tiktok}].map(e=>`<a href="${e.href}" target="_blank" rel="noopener noreferrer" class="navbar-social-icon" title="${e.label}"><img src="${e.url}" alt="${e.label}" /></a>`).join('')}</div><div class="navbar-lang">${[{code:'ua',emoji:'üá∫üá¶'},{code:'en',emoji:'üá¨üáß'}].map(t=>`<img src="images/flag-${t.code}.svg" alt="${t.code}" class="lang-flag${currentLang===t.code?' active':''}" onclick="setLanguage('${t.code}')" style="cursor: pointer;" />`).join('')}</div></div></div></nav>`}function renderFooter(){return`<footer><div class="container"><div class="footer-content"><div class="footer-section"><h4>Kunze Auto</h4><ul><li><a href="#/">–ì–æ–ª–æ–≤–Ω–∞</a></li><li><a href="#/">–ö–∞—Ç–∞–ª–æ–≥</a></li></ul></div><div class="footer-section"><h4>–Ü–Ω—Ñ–æ—Ä–º–∞—Ü—ñ—è</h4><ul><li><a href="#/">–ü—Ä–æ –Ω–∞—Å</a></li><li><a href="#/">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a></li></ul></div></div><div class="footer-bottom"><p>&copy; 2025 Kunze Auto. –í—Å—ñ –ø—Ä–∞–≤–∞ –∑–∞—Ö–∏—â–µ–Ω—ñ.</p></div></div></footer>`}function navigateTo(e){window.location.hash='#/'+e}function initMobileMenu(){const e=document.getElementById('navbarToggle'),t=document.getElementById('navMenu'),a=document.getElementById('app');e&&(e.addEventListener('click',()=>{e.classList.toggle('active'),t.classList.toggle('active')}),a.addEventListener('click',e=>{const n=e.target.closest('a,.btn');n&&'A'===n.tagName&&(e.classList.remove('active'),t.classList.remove('active'))}))}function setupGalleryInteraction(){const e=document.getElementById('galleryPopup');e&&(e.addEventListener('click',e=>{e.target===e&&closeGallery()}),(document.querySelector('.gallery-popup-close')||[]).addEventListener('click',closeGallery),(document.querySelector('.gallery-prev')||[]).addEventListener('click',()=>changeGalleryImage(-1)),(document.querySelector('.gallery-next')||[]).addEventListener('click',()=>changeGalleryImage(1)))}function openGallery(e){const t=document.getElementById('galleryPopup');t&&(currentGalleryIndex=e,updateGalleryImage(),t.classList.add('open'))}function closeGallery(){const e=document.getElementById('galleryPopup');e&&e.classList.remove('open')}function changeGalleryImage(e){currentGalleryIndex=(currentGalleryIndex+e+currentGallery.length)%currentGallery.length,updateGalleryImage()}function updateGalleryImage(){const e=document.getElementById('galleryImage');if(e&&currentGallery.length>0){const t=currentGallery[currentGalleryIndex];e.src=t,e.alt=getAlt(currentCar,t),document.getElementById('current').textContent=currentGalleryIndex+1,document.getElementById('total').textContent=currentGallery.length}}function formatPrice(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,' ')}function getAlt(e,t){if(!e||!window.altMap)return'–§–æ—Ç–æ –∞–≤—Ç–æ–º–æ–±—ñ–ª—è';const a=(window.altMap&&window.altMap[e.id])||{};return a[t]||'–§–æ—Ç–æ '+e.model}function contactUs(e){const t=window.LANG&&window.LANG[currentLang];if(!t)return;const a=`${t.contactModel}: ${e}`;alert(`–í–∏ –º–æ–∂–µ—Ç–µ —Å–∫–æ–ø—ñ—é–≤–∞—Ç–∏ —Ü–µ–π —Ç–µ–∫—Å—Ç —Ç–∞ –≤—ñ–¥–ø—Ä–∞–≤–∏—Ç–∏ –Ω–∞ WhatsApp –∞–±–æ Telegram:\n\n${a}\n\n–¢–µ–ª–µ—Ñ–æ–Ω: ${APP_CONFIG.PRIMARY_PHONE}`)}document.addEventListener('DOMContentLoaded',()=>{function waitForDeps(){if(window.LANG&&window.cars&&window.altMap){hidePreloader(),handleRoute(),initMobileMenu(),setupEventListeners()}else{setTimeout(waitForDeps,50)}}waitForDeps()}),window.addEventListener('hashchange',handleRoute);function setupEventListeners(){}